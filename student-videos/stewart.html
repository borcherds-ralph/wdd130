<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavsScript Story Creator</title>
    <meta name="description"
        content="This is a story creator converted from Python">
    <meta name="author" content="Ralph Borcherds & Steward">
    <style>
        body {
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
        }

        form {
            max-width: 700px;
            margin: 0 auto;
        }

        fieldset {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1em;
        }

        label {
            grid-column: 1;
            justify-self: right;
            font-weight: 700;
        }

        input {
            grid-column: 2;
        }
    </style>
</head>

<body>
    <header>
        <nav>
        </nav>
    </header>
    <main>
        <form action="#">
            <fieldset>
                <legend>Story Prompts</legend>
                <label for="adjective">An Adjective:</label>
                <input type="string" name="adjective" id="adjective">
                <label for="animalInput">An Animal:</label>
                <input type="string" name="animalInput" id="animalInput">
                <label for="verb">A Verb: </label>
                <input type="string" name="verb" id="verb">
                <label for="exclamation">An Exclamation (e.g., hooray):</label>
                <input type="string" name="exclamation" id="exclamation">
                <label for="verb2">Another verb:</label>
                <input type="string" name="verb2" id="verb2">
                <label for="verb3">A third verb:</label>
                <input type="string" name="verb3" id="verb3">
                <label for="dayOfTheWeekInput">What is the current day of the
                    week?:</label>
                <input type="string" name="dayOfTheWeekInput"
                    id="dayOfTheWeekInput">
            </fieldset>
            <button type="submit">Create Story</button>
        </form>
        <div id="story"></div>
    </main>
    <footer>
    </footer>
    <script>
        function getArticle(word) {
            // Returns 'an' if the word starts with a vowel sound, otherwise 'a'.
            const vowels = ['a', 'e', 'i', 'o', 'u'];
            return vowels.includes(word[0].toLowerCase()) ? 'an' : 'a';
        }

        function createStory(adjective, animal, verb, exclamation, verb2, verb3, dayOfTheWeek) {
            // Generates a story based on the given parameters, including correct usage of 'a' or 'an'.
            const animalArticle = getArticle(animal);
            return `
I am David Attenborough and this is a look at ${animalArticle} ${animal}:
In the depths of the enigmatic forest, one can encounter ${animalArticle} ${animal}. This astonishing and ${adjective} creature is renowned for its prowess in ${verb} its unsuspecting prey, sometimes accompanied by a foreboding ${exclamation}. Yet, should an astute hunter ${verb2} it with consummate skill, more often than not, it will ${verb3}, permitting a safe and remarkable capture, but only on ${dayOfTheWeek}s.
`;
        }

        function main() {
            // Main function to run the program.
            // console.log("Please enter the following:");
            const adjective = document.getElementById('adjective').value;
            const animalInput = document.getElementById('animalInput').value;
            const animal = animalInput.charAt(0).toUpperCase() + animalInput.slice(1).toLowerCase();
            const verb = document.getElementById('verb').value;
            const exclamation = document.getElementById('exclamation').value;
            const verb2 = document.getElementById('verb2').value;
            const verb3 = document.getElementById('verb3').value;
            const dayOfTheWeekInput = document.getElementById('dayOfTheWeekInput').value;
            const dayOfTheWeek = dayOfTheWeekInput.charAt(0).toUpperCase() + dayOfTheWeekInput.slice(1).toLowerCase();

            const story = createStory(adjective, animal, verb, exclamation, verb2, verb3, dayOfTheWeek);
            // console.log(story);
            // This next line is what prints the story to the empty div below the form.
            document.getElementById('story').innerHTML = story;
        }

        // Ensuring DOM is ready before executing main
        if (document.readyState === 'loading') {  // Loading hasn't finished yet
            document.addEventListener('submit', main);
        } else {  // `DOMContentLoaded` has already fired
            main();
        }
    </script>
</body>

</html>